# Migration `watch-20191121150702`

This migration has been generated by alechp at 11/21/2019, 3:07:02 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql

```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration ..watch-20191121150702
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,95 @@
+// --------------------------
+
+generator photon {
+  provider = "photonjs"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = "postgresql://alechp@localhost:5432/csat?schema=csat"
+}
+
+// --------------------------
+
+model TwitterUserMeta {
+  id              String @default(cuid()) @id
+  twitterId       String
+  twitterUsername String
+}
+
+model User {
+  id          String          @default(cuid()) @id
+  createdAt   DateTime        @default(now())
+  updatedAt   DateTime        @updatedAt
+  email       String?         @unique
+  name        String?
+  twitter     TwitterUserMeta
+  predictions Prediction[]
+}
+
+// --------------------------
+
+enum PredictionStatus {
+  ACTIVE
+  DELETED
+  REFUTED
+}
+
+model Prediction {
+  id         String           @default(cuid()) @id
+  createdAt  DateTime         @default(now())
+  updatedAt  DateTime         @updatedAt
+  start      DateTime?
+  finish     DateTime?
+  author     User
+  content    String
+  assetPair  AssetPair
+  responses  Response[]
+  attributed Boolean          @default(value: false)
+  status     PredictionStatus @default(value: Active)
+}
+
+// --------------------------
+
+model Asset {
+  id                  String    @default(cuid()) @id
+  createdAt           DateTime  @default(now())
+  updatedAt           DateTime  @updatedAt
+  name                String
+  symbol              String
+  assetNumerator      AssetPair @relation(name: "Asset")
+  currencyDenominator AssetPair @relation(name: "Currency")
+}
+
+model AssetPair {
+  id                  String   @default(cuid()) @id
+  createdAt           DateTime @default(now())
+  updatedAt           DateTime @updatedAt
+  assetNumerator      Asset    @relation(name: "Asset")
+  currencyDenominator Asset    @relation(name: "Currency")
+  ratio               Float
+}
+
+// --------------------------
+
+enum ResponseStatus {
+  UNPARSED
+  PARSED
+  SENT
+}
+
+enum ResponseType {
+  ACKNOWLEDGMENT
+  RESULT
+  FAILURE
+}
+
+model Response {
+  id        String         @default(cuid()) @id
+  createdAt DateTime       @default(now())
+  updatedAt DateTime       @updatedAt
+  sentAt    DateTime
+  recipient User
+  type      ResponseType
+  status    ResponseStatus
+}
```

## Photon Usage

You can use a specific Photon built for this migration (watch-20191121150702)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/watch-20191121150702'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
